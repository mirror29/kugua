(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/detail-tao"],{"1c02":function(t,e,n){},"1c5d":function(t,e,n){"use strict";n.r(e);var o=n("bae6"),a=n("cf4a");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("dc40");var s=n("2877"),r=Object(s["a"])(a["default"],o["a"],o["b"],!1,null,null,null);e["default"]=r.exports},bae6:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})},cf4a:function(t,e,n){"use strict";n.r(e);var o=n("f791"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a},dc40:function(t,e,n){"use strict";var o=n("1c02"),a=n.n(o);a.a},f791:function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(n("a34a")),i=n("2f62");function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,o,a,i,s){try{var r=t[i](s),c=r.value}catch(u){return void n(u)}r.done?e(c):Promise.resolve(c).then(o,a)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(o,a){var i=t.apply(e,n);function s(t){r(i,o,a,s,c,"next",t)}function c(t){r(i,o,a,s,c,"throw",t)}s(void 0)})}}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){l(t,e,n[e])})}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){return n.e("components/quick-skeleton/quick-skeleton").then(n.bind(null,"b700"))},p=function(){return n.e("components/uni-countdown").then(n.bind(null,"8858"))},h={data:function(){var t;return{show:!1,showSkeleton:!0,timestamp:1e6,date:0,hour:0,minutes:0,seconds:0,num_iid:"",detail:"",goodsDetail:(t={name:"儿童奥特曼胶囊男孩升华软胶玩具噢特曼哦赛罗迪迦捷德套装器变身",num_iid:585963726903,summary:"",content:"",images:"https://img.alicdn.com/bao/uploaded/i1/2200559661255/O1CN01lZ4Nm21L8pYUA6Lt3_!!2200559661255.jpg",small_images:"https://img.alicdn.com/i4/2200559661255/O1CN01Ms1usV1L8pYVCVNms_!!2200559661255.jpg|https://img.alicdn.com/i1/2200559661255/O1CN01tsirHN1L8pYTCBvZ7_!!2200559661255.jpg|https://img.alicdn.com/i2/2200559661255/O1CN01cgjTxI1L8pYUWKhEc_!!2200559661255.jpg",video:"",seller:'{"seller_id":2200559661255,"shop_title":"秦家日用百货店"}',express:"",price:"56.37",discountPrice:"56.37",commissionRate:"2001",couponAmount:0},l(t,"couponAmount","40"),l(t,"couponInfo","满40元减40元"),l(t,"volume",49),l(t,"categoryId",0),l(t,"categoryName",""),l(t,"activityId",0),l(t,"activityName",""),l(t,"source","tb"),l(t,"sourceUrl","https://item.taobao.com/item.htm?id=585963726903"),l(t,"shortUrl",""),l(t,"insertType","search"),l(t,"tag",""),l(t,"status","ready"),l(t,"created_at",1565334773),l(t,"updated_at",1565334773),l(t,"start_at",0),l(t,"expire_at",0),l(t,"share_commission","733.18"),l(t,"upgrade_commission","1003.89"),l(t,"uid",0),t),swiperList:[],currentSwiper:0,isKeep:!1,url:""}},components:{skeleton:d,countdown:p},computed:u({},(0,i.mapState)(["hasLogin","userInfo","userMsg"])),onLoad:function(t){this.num_iid=t.num_iid},onReady:function(){var t=this;t.$refs.float.sendRequest()},onShow:function(){var t=this;t.$refs.skeleton.attachedAction(),t.$refs.skeleton.readyAction(),this.sendRequest()},onPageScroll:function(t){},onReachBottom:function(){},mounted:function(){},methods:{sendRequest:function(){var e=c(a.default.mark(function e(){var n,o;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.hasLogin){e.next=10;break}return e.next=4,this.$request.post("/search/show",{data:{num_iid:this.num_iid}});case 4:n=e.sent,this.goodsDetail=n.data.data,this.$common.checkStatus(n.data.code),this.callBack(),e.next=16;break;case 10:return e.next=12,this.$request.post("/search/show",{data:{num_iid:this.num_iid},header:{token:this.userInfo.token}});case 12:o=e.sent,this.goodsDetail=o.data.data,this.$common.checkStatus(o.data.code),this.callBack();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](0),console.error(t("error:",e.t0," at pages\\product\\detail-tao.vue:229"));case 21:case"end":return e.stop()}},e,this,[[0,18]])}));function n(){return e.apply(this,arguments)}return n}(),callBack:function(){var t=this;""!==t.goodsDetail.name&&void 0!==t.goodsDetail.name||this.sendRequest();var e=t.goodsDetail;t.showSkeleton=!1,t.show=!0,this.url=e.shortUrl,t.swiperList=e.small_images.split("|");var n=t.$common.formatTime(e.expire_at);e.time=n;var o=Number(new Date(n)),a=o-Number(new Date);t.date=parseInt(a/1e3/60/60/24%30),t.hour=parseInt(a/1e3/60/60%24),t.minutes=parseInt(a/1e3/60%60),t.seconds=parseInt(a/1e3%60);var i=(e.discountPrice-e.couponAmount).toFixed(1);e.afterPrice=i,e.couponAmount=parseInt(e.couponAmount)},swiperChange:function(t){this.currentSwiper=t.detail.current},toTaobao:function(){var e=c(a.default.mark(function e(){var n,i,s;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this,this.hasLogin){e.next=5;break}o.showModal({title:"请先登录！",content:"您目前尚未登录",success:function(e){e.confirm?o.navigateTo({url:"/pages/login/login"}):e.cancel&&console.log(t("用户点击取消"," at pages\\product\\detail-tao.vue:272"))}}),e.next=10;break;case 5:return e.next=7,this.$request.post("/authorization/taobao-verify",{header:{token:this.userInfo.token}});case 7:i=e.sent,console.log(t(i," at pages\\product\\detail-tao.vue:283")),0===i.data.code?(s=n.url,plus.runtime.openURL(s.replace("https","taobao").replace("http","taobao"),function(t){o.showModal({content:"未检测到手机淘宝",showCancel:!1,success:function(t){o.showToast({title:"优惠券领取失败",icon:"none"})}})})):n.$common.taoLogin();case 10:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),share:function(){this.shareClass="show"},getDeail:function(){var e=this,n="https://h5api.m.taobao.com/h5/mtop.taobao.detail.getdesc/6.0/?jsv=2.4.0&appKey=12574478&t=1560248888574&sign=2db06c3e2c1ec60d2cb53e4f06e92077&api=mtop.taobao.detail.getdesc&v=6.0&AntiFlool=true&AntiCreep=true&type=jsonp&dataType=jsonp&callback=mtopjsonp1&data=%7b%22id%22%3a%22".concat(this.goodsDetail.id,"%22%2c%22type%22%3a%221%22%7d");o.request({url:n,dataType:"jsonp",method:"POST",jsonpCallback:"mtopjsonp1",header:{"content-type":"application/x-www-form-urlencoded"},success:function(n){console.log(t(JSON.parse(n.data)," at pages\\product\\detail-tao.vue:326")),e.detail=n.data.data.pcDescContent}})},hideShare:function(){var t=this;this.shareClass="hide",setTimeout(function(){t.shareClass="none"},150)},keep:function(){this.isKeep=!this.isKeep},toHome:function(){o.switchTab({url:"/pages/index/index"})},shareGoods:function(){var e=c(a.default.mark(function e(){var n;return a.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this,this.hasLogin){e.next=5;break}o.showModal({title:"请先登录！",content:"您目前尚未登录",success:function(e){e.confirm?o.navigateTo({url:"/pages/login/login"}):e.cancel&&console.log(t("用户点击取消"," at pages\\product\\detail-tao.vue:359"))}}),e.next=10;break;case 5:return e.next=7,this.$request.post("/authorization/taobao-verify",{header:{token:this.userInfo.token}});case 7:n=e.sent,console.log(t(n," at pages\\product\\detail-tao.vue:370")),0===n.data.code?o.navigateTo({url:"./share?type=search&id=".concat(this.num_iid)}):this.$common.taoLogin();case 10:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),toSwiper:function(){o.previewImage({urls:this.swiperList})}}};e.default=h}).call(this,n("0de9")["default"],n("6e42")["default"])}},[["d13f","common/runtime","common/vendor"]]]);