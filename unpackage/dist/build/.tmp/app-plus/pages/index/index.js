(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"278a":function(t,e,n){"use strict";n.r(e);var a=n("2ae7"),i=n("d4f1");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("c335");var r=n("2877"),s=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=s.exports},"299d":function(t,e,n){},"2ae7":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},b369:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("a34a")),o=n("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,a,i,o,r){try{var s=t[o](r),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(a,i)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(a,i){var o=t.apply(e,n);function r(t){s(o,a,i,r,c,"next",t)}function c(t){s(o,a,i,r,c,"throw",t)}r(void 0)})}}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),a.forEach(function(e){l(t,e,n[e])})}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){return n.e("components/goods-list2").then(n.bind(null,"49ad"))},f=function(){return Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-beibei")]).then(n.bind(null,"ec8b"))},p={data:function(){return{mescroll:null,downOption:{auto:!1},upOption:{auto:!0,noMoreSize:4},topShow:!1,show:!1,showSkeleton:!0,indicatorDots:!1,autoplay:!0,interval:2500,duration:1e3,titleNViewBackground:"",swiperCurrent:0,swiperLength:0,cardCur:0,dotStyle:!1,direction:"",carouselList:[],goodsList:[],cateList:[],couponsList:[],noticeList:[],page:2,iconList:[{icon:"../../static/images/index-tao.png",text:"淘好货",url:"../product/99?tag=淘好货"},{icon:"../../static/images/index-mu.png",text:"母婴专区",url:"../product/baby"},{icon:"../../static/images/index-pinpai.png",text:"品牌专区",url:"../product/99?tag=品牌专区"},{icon:"../../static/images/index-bao.png",text:"9.9包邮",url:"../product/99?tag=9块9包邮"}],projectList:[{img:"../../static/images/fuli-1.png",title:"猜你喜欢",subtitle:"你喜欢的，都在这里",url:"../product/guess-like"},{img:"../../static/images/video.png",title:"抖券",subtitle:"宝贝视频专区",url:"../product/video"},{img:"../../static/images/fuli-2.png",title:"今日疯抢",subtitle:"高佣好物",url:"../product/99?tag=今日疯抢"}],flashList:[],buyList:[],modalName:""}},components:{list:d,MescrollUni:f},computed:u({},(0,o.mapState)(["showModal","clipText","userMsg","hasLogin","userInfo"])),onLoad:function(){},onReady:function(){var t=this;t.$refs.skeleton.attachedAction(),t.$refs.skeleton.readyAction(),t.sendRequest(),t.$refs.float.sendRequest()},onShow:function(){this.$common.searchClip()},updated:function(){""!=this.clipText?this.showM():this.$refs.modal.hideModal()},onPageScroll:function(t){t.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},methods:u({},(0,o.mapMutations)(["setId"]),{sendRequest:function(){var e=c(i.default.mark(function e(){var n,a,o,r,s,c,u,l,d,f,p,h,g,m,v,b,x,w;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=this,e.prev=1,e.next=4,this.$request.post("/taobao-buy/nav-index",{});case 4:return a=e.sent,n.carouselList=a.data.data,n.titleNViewBackground=a.data.data[0].color,n.swiperLength=a.data.data.length,e.next=10,this.$request.post("/taobao-buy/menu",{});case 10:return o=e.sent,n.cateList=o.data.data,e.next=14,this.$request.post("/taobao-buy/announcement",{});case 14:return r=e.sent,n.noticeList=r.data.data,e.next=18,this.$request.post("taobao-buy/get-custom-nav",{});case 18:s=e.sent,c=!0,u=!1,l=void 0,e.prev=22,d=s.data.data[Symbol.iterator]();case 24:if(c=(f=d.next()).done){e.next=51;break}if(p=f.value,"2"!==p.position){e.next=47;break}for(h=!0,g=!1,m=void 0,e.prev=30,v=p.goods[Symbol.iterator]();!(h=(b=v.next()).done);h=!0)x=b.value,w=(x.coupon_price-x.coupon_money).toFixed(1),x.afterPrice=w;e.next=38;break;case 34:e.prev=34,e.t0=e["catch"](30),g=!0,m=e.t0;case 38:e.prev=38,e.prev=39,h||null==v.return||v.return();case 41:if(e.prev=41,!g){e.next=44;break}throw m;case 44:return e.finish(41);case 45:return e.finish(38);case 46:n.flashList=p;case 47:"3"===p.position&&(n.buyList=p);case 48:c=!0,e.next=24;break;case 51:e.next=57;break;case 53:e.prev=53,e.t1=e["catch"](22),u=!0,l=e.t1;case 57:e.prev=57,e.prev=58,c||null==d.return||d.return();case 60:if(e.prev=60,!u){e.next=63;break}throw l;case 63:return e.finish(60);case 64:return e.finish(57);case 65:n.callBack(),e.next=71;break;case 68:e.prev=68,e.t2=e["catch"](1),console.error(t("error:",e.t2," at pages\\index\\index.vue:361"));case 71:case"end":return e.stop()}},e,this,[[1,68],[22,53,57,65],[30,34,38,46],[39,,41,45],[58,,60,64]])}));function n(){return e.apply(this,arguments)}return n}(),callBack:function(){this.showSkeleton=!1,this.show=!0,this.userMsg.level>0||(this.modalName="Image")},swiperChange:function(t){var e=t.detail.current;this.swiperCurrent=e,this.titleNViewBackground=this.carouselList[e].color},cardSwiper:function(t){this.cardCur=t.detail.current},toCate:function(t){var e=this;e.setId(t),a.switchTab({url:"/pages/category/category"})},showM:function(){this.showModal&&this.$refs.modal.showModal()},hideModal:function(t){this.modalName=""},toLevel:function(){a.navigateTo({url:"/pages/user/config/upgrade-equity"})},navToDetailPage:function(t){var e=t;a.navigateTo({url:"/pages/product/detail?num_iid=".concat(e)})},mescrollInit:function(t){this.mescroll=t},downCallback:function(t){t.resetUpScroll()},upCallback:function(t){var e=this;this.getListDataFromNet(t.num,t.size,function(n){t.endSuccess(n.length),1==t.num&&(e.couponsList=[]),e.couponsList=e.couponsList.concat(n)},function(){t.endErr()})},getListDataFromNet:function(){var t=c(i.default.mark(function t(e,n,a,o){var r,s,c,u,l,d,f,p;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.hasLogin){t.next=10;break}return t.next=4,this.$request.post("/product/index",{data:{page:e,limit:n,tag:"首页,热销"},header:{token:this.userInfo.token}});case 4:for(c in r=t.sent,s=[],r.data.data)u=(r.data.data[c].discountPrice-r.data.data[c].commissionAmount).toFixed(1),r.data.data[c].afterPrice=u,s.push(r.data.data[c]);a&&a(s),t.next=16;break;case 10:return t.next=12,this.$request.post("/product/index",{data:{page:e,limit:n,tag:"首页,热销"}});case 12:for(f in l=t.sent,d=[],l.data.data)p=(l.data.data[f].discountPrice-l.data.data[f].commissionAmount).toFixed(1),l.data.data[f].afterPrice=p,d.push(l.data.data[f]);a&&a(d);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](0),o&&o();case 21:case"end":return t.stop()}},t,this,[[0,18]])}));function e(e,n,a,i){return t.apply(this,arguments)}return e}()}),onReachBottom:function(){this.mescroll.triggerUpScroll()},onNavigationBarSearchInputClicked:function(){var t=c(i.default.mark(function t(e){return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a.navigateTo({url:"search"});case 1:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),onNavigationBarButtonTap:function(t){var e=t.index;if(0===e)this.$api.msg("点击了扫描");else if(1===e){var n=getCurrentPages(),i=n[n.length-1],o=i.$getAppWebview();o.hideTitleNViewButtonRedDot({index:e}),a.navigateTo({url:"/pages/notice/notice"})}}};e.default=p}).call(this,n("0de9")["default"],n("6e42")["default"])},c335:function(t,e,n){"use strict";var a=n("299d"),i=n.n(a);i.a},d4f1:function(t,e,n){"use strict";n.r(e);var a=n("b369"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a}},[["bce7","common/runtime","common/vendor"]]]);