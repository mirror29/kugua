(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/search"],{"1fb7":function(e,t,n){"use strict";n.r(t);var o=n("fcf4"),r=n.n(o);for(var s in o)"default"!==s&&function(e){n.d(t,e,function(){return o[e]})}(s);t["default"]=r.a},2432:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r})},c6c6:function(e,t,n){"use strict";var o=n("cfc3"),r=n.n(o);r.a},cfc3:function(e,t,n){},dd0d:function(e,t,n){"use strict";n.r(t);var o=n("2432"),r=n("1fb7");for(var s in r)"default"!==s&&function(e){n.d(t,e,function(){return r[e]})}(s);n("c6c6");var i=n("2877"),a=Object(i["a"])(r["default"],o["a"],o["b"],!1,null,null,null);t["default"]=a.exports},fcf4:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n("a34a"));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,o,r,s,i){try{var a=e[s](i),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(o,r)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var s=e.apply(t,n);function a(e){i(s,o,r,a,u,"next",e)}function u(e){i(s,o,r,a,u,"throw",e)}a(void 0)})}}var u=function(){return n.e("components/mehaotian-search-revision/mehaotian-search-revision").then(n.bind(null,"2b4c"))},c=function(){return n.e("components/guess-list").then(n.bind(null,"d3ce"))},d={data:function(){return{defaultKeyword:"",keyword:"",oldKeywordList:[],hotKeywordList:[],keywordList:[],forbid:"",isShowKeywordList:!1,list:""}},onLoad:function(){this.init()},components:{mSearch:u,List:c},onReady:function(){this.sendRequest()},methods:{init:function(){this.loadDefaultKeyword(),this.loadOldKeyword(),this.loadHotKeyword()},sendRequest:function(){var t=a(r.default.mark(function t(){var n,s,i,a,u,c,d,f,l,h,y,w;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$request.post("/search/default-keywords",{});case 2:return n=t.sent,this.defaultKeyword=n.data.data.keyword,t.next=6,this.$request.post("/search/keywords",{});case 6:return s=t.sent,this.hotKeywordList=s.data.data,i="",e.getNetworkType({success:function(e){console.log(o(e.networkType," at pages\\index\\search.vue:105")),i="wifi"===e.networkType?"wifi":"cell"}}),a="",e.getSystemInfo({success:function(e){a=e.platform}}),t.next=14,this.$request.post("/product/guess-like",{data:{os:a,net:i}});case 14:for(u=t.sent,c=[],d=!0,f=!1,l=void 0,t.prev=19,h=u.data.data[Symbol.iterator]();!(d=(y=h.next()).done);d=!0)w=y.value,w.couponAmount=parseInt(w.couponAmount),c.push(w);t.next=27;break;case 23:t.prev=23,t.t0=t["catch"](19),f=!0,l=t.t0;case 27:t.prev=27,t.prev=28,d||null==h.return||h.return();case 30:if(t.prev=30,!f){t.next=33;break}throw l;case 33:return t.finish(30);case 34:return t.finish(27);case 35:this.list=c;case 36:case"end":return t.stop()}},t,this,[[19,23,27,35],[28,,30,34]])}));function n(){return t.apply(this,arguments)}return n}(),loadOldKeyword:function(){var t=this;e.getStorage({key:"OldKeys",success:function(e){var n=JSON.parse(e.data);t.oldKeywordList=n}})},inputChange:function(t){var n=this,o=t.detail?t.detail.value:t;if(!o)return this.keywordList=[],void(this.isShowKeywordList=!1);this.isShowKeywordList=!0,e.request({url:"https://suggest.taobao.com/sug?code=utf-8&q="+o,success:function(e){n.keywordList=n.drawCorrelativeKeyword(e.data.result,o)}})},drawCorrelativeKeyword:function(e,t){for(var n=e.length,o=[],r=0;r<n;r++){var s=e[r],i=s[0].replace(t,"<span style='color: #9f9f9f;'>"+t+"</span>");i="<div>"+i+"</div>";var a={keyword:s[0],htmlStr:i};o.push(a)}return o},setkeyword:function(e){this.keyword=e.keyword,this.isShowKeywordList=!1},oldDelete:function(){var t=this;e.showModal({content:"确定清除历史搜索记录？",success:function(n){n.confirm?(console.log(o("用户点击确定"," at pages\\index\\search.vue:190")),t.oldKeywordList=[],e.removeStorage({key:"OldKeys"})):n.cancel&&console.log(o("用户点击取消"," at pages\\index\\search.vue:196"))}})},hotToggle:function(){this.forbid=this.forbid?"":"_forbid"},doSearch:function(t){t=t||(this.keyword?this.keyword:this.defaultKeyword),this.keyword=t,this.saveKeyword(t);var n=escape(t);e.navigateTo({url:"../product/goods-list?key=".concat(n)}),this.isShowKeywordList=!1},saveKeyword:function(t){var n=this;e.getStorage({key:"OldKeys",success:function(r){console.log(o(r.data," at pages\\index\\search.vue:222"));var s=JSON.parse(r.data),i=s.indexOf(t);-1==i?s.unshift(t):(s.splice(i,1),s.unshift(t)),s.length>10&&s.pop(),e.setStorage({key:"OldKeys",data:JSON.stringify(s)}),n.oldKeywordList=s},fail:function(o){var r=[t];e.setStorage({key:"OldKeys",data:JSON.stringify(r)}),n.oldKeywordList=r}})}}};t.default=d}).call(this,n("6e42")["default"],n("0de9")["default"])}},[["f663","common/runtime","common/vendor"]]]);