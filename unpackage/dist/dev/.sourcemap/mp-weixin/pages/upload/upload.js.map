{"version":3,"sources":["webpack:///E:/公司/项目/KuGuaVUE/pages/upload/upload.vue?5964","webpack:///E:/公司/项目/KuGuaVUE/pages/upload/upload.vue?6f27","webpack:///E:/公司/项目/KuGuaVUE/pages/upload/upload.vue?a0a4","webpack:///E:/公司/项目/KuGuaVUE/pages/upload/upload.vue?9eb1","webpack:///E:/公司/项目/KuGuaVUE/pages/upload/upload.vue","webpack:///E:/公司/项目/KuGuaVUE/pages/upload/upload.vue?1f4e","webpack:///E:/公司/项目/KuGuaVUE/pages/upload/upload.vue?fa38"],"names":["device","uni","getSystemInfoSync","width","windowWidth","height","windowHeight","data","cropperOpt","id","scale","zoom","cut","x","y","weCropper","methods","back","redirectTo","url","touchStart","e","touchMove","touchEnd","convertBase64UrlToBlob","dataURI","type","binary","atob","split","array","i","length","push","charCodeAt","Blob","Uint8Array","filename","blobToDataURL","blob","a","FileReader","readAsDataURL","onload","getRes","target","result","console","log","getCropperImage","_this","avatar","uploadTap","self","chooseImage","count","sizeType","sourceType","success","res","src","tempFilePaths","pushOrign","onLoad","option","Object","assign","on","ctx","showToast","title","icon","duration","hideToast"],"mappings":"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","file":"pages/upload/upload.js","sourcesContent":["import { render, staticRenderFns } from \"./upload.vue?vue&type=template&id=61452364&\"\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\公司\\\\apps\\\\HBuilderX.2.0.1.20190614.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('61452364', component.options)\n    } else {\n      api.reload('61452364', component.options)\n    }\n    module.hot.accept(\"./upload.vue?vue&type=template&id=61452364&\", function () {\n      api.rerender('61452364', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"项目/KuGuaVUE/pages/upload/upload.vue\"\nexport default component.exports","import mod from \"-!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../apps/HBuilderX.2.0.1.20190614.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=template&id=61452364&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport weCropper from './weCropper';\r\nconst device = uni.getSystemInfoSync();\r\nconst width = device.windowWidth;\r\nconst height = device.windowHeight - 50;\r\n// console.log(device);\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tcropperOpt: {\r\n\t\t\t\tid: 'cropper',\r\n\t\t\t\twidth: width,\r\n\t\t\t\theight: height,\r\n\t\t\t\tscale: 2.5,\r\n\t\t\t\tzoom: 8,\r\n\t\t\t\tcut: {\r\n\t\t\t\t\tx: (width - 295) / 2,\r\n\t\t\t\t\ty: (height - 390) / 2,\r\n\t\t\t\t\twidth: 295,\r\n\t\t\t\t\theight: 295\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tweCropper: ''\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tback() {\r\n\t\t\tuni.redirectTo({\r\n\t\t\t\turl: '../user/config/user-data'\r\n\t\t\t});\r\n\t\t},\r\n\t\ttouchStart(e) {\r\n\t\t\tthis.weCropper.touchStart(e);\r\n\t\t},\r\n\t\ttouchMove(e) {\r\n\t\t\tthis.weCropper.touchMove(e);\r\n\t\t},\r\n\t\ttouchEnd(e) {\r\n\t\t\tthis.weCropper.touchEnd(e);\r\n\t\t},\r\n\t\tconvertBase64UrlToBlob(dataURI, type) {\r\n\t\t\tvar binary = atob(dataURI.split(',')[1]);\r\n\t\t\tvar array = [];\r\n\t\t\tfor (var i = 0; i < binary.length; i++) {\r\n\t\t\t\tarray.push(binary.charCodeAt(i));\r\n\t\t\t}\r\n\t\t\treturn new Blob([new Uint8Array(array)], { type: type }, { filename: '1111.jpg' });\r\n\t\t},\r\n\t\tblobToDataURL(blob) {\r\n\t\t\tvar a = new FileReader();\r\n\t\t\ta.readAsDataURL(blob); //读取文件保存在result中\r\n\t\t\ta.onload = function(e) {\r\n\t\t\t\tvar getRes = e.target.result; //读取的结果在result中\r\n\t\t\t\tconsole.log(getRes);\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetCropperImage() {\r\n\t\t\tlet _this = this;\r\n\t\t\t//let pathurl = url + '/user/upload';上传服务器地址\r\n\t\t\tthis.weCropper.getCropperImage(avatar => {\r\n\t\t\t\tif (avatar) {\r\n\t\t\t\t\t//  获取到裁剪后的图片\r\n\t\t\t\t\t//  获取到裁剪后的图片\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t  url: '../user/config/user-data?avatar=' + avatar\r\n\t\t\t\t\t})\r\n\t\t\t\t\t//下面是上传到服务器的方法\r\n// \t\t\t\t\tuni.uploadFile({\r\n// \t\t\t\t\t\turl: pathurl,\r\n// \t\t\t\t\t\tfilePath: avatar,\r\n// \t\t\t\t\t\tname: 'file',\r\n// \t\t\t\t\t\tformData: { token: token, userId: userId},\r\n// \t\t\t\t\t\tsuccess: res => {\r\n// \t\t\t\t\t\t\tconsole.log('uploadImage success, res is:', res);\r\n// \t\t\t\t\t\t\t\tuni.showToast({\r\n// \t\t\t\t\t\t\t\ttitle: '上传成功',\r\n// \t\t\t\t\t\t\t\ticon: 'success',\r\n// \t\t\t\t\t\t\t\tduration: 1000\r\n// \t\t\t\t\t\t\t});\r\n// \t\t\t\t\t\t},\r\n// \t\t\t\t\t\tail: err => {\r\n// \t\t\t\t\t\t\tconsole.log('uploadImage fail', err);\r\n// \t\t\t\t\t\t\tuni.showModal({\r\n// \t\t\t\t\t\t\t\tcontent: err.errMsg,\r\n// \t\t\t\t\t\t\t\tshowCancel: false\r\n// \t\t\t\t\t\t\t});\r\n// \t\t\t\t\t\t\tuni.hideLoading();\r\n// \t\t\t\t\t\t},\r\n// \t\t\t\t\t\tcomplete: () => {\r\n// \t\t\t\t\t\t\tconsole.log('complate');\r\n// \t\t\t\t\t\t}\r\n// \t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('获取图片失败，请稍后重试');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tuploadTap() {\r\n\t\t\tconst self = this;\r\n\r\n\t\t\tuni.chooseImage({\r\n\t\t\t\tcount: 1, // 默认9\r\n\t\t\t\tsizeType: ['compressed'], // 可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\tsourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tlet src = res.tempFilePaths[0];\r\n\t\t\t\t\t//  获取裁剪图片资源后，给data添加src属性及其值\r\n\r\n\t\t\t\t\tself.weCropper.pushOrign(src);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tonLoad(option) {\r\n\t\t// do something\r\n\t\tconst cropperOpt = this.cropperOpt;\r\n\t\tconst src = option.src;\r\n\t\tif (src) {\r\n\t\t\tObject.assign(cropperOpt, {\r\n\t\t\t\tsrc\r\n\t\t\t});\r\n\r\n\t\t\tthis.weCropper = new weCropper(cropperOpt)\r\n\t\t\t\t.on('ready', function(ctx) {})\r\n\t\t\t\t.on('beforeImageLoad', ctx => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '上传中',\r\n\t\t\t\t\t\ticon: 'loading',\r\n\t\t\t\t\t\tduration: 3000\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.on('imageLoad', ctx => {\r\n\t\t\t\t\tuni.hideToast();\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}